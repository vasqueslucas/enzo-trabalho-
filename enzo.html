<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Dr.IA - Assistente Virtual</title>
  <style>
    * { box-sizing: border-box; }
    body[data-theme='dark'] {
  background-color: #1c1c1c;
  background-image: url('https://www.transparenttextures.com/patterns/diagnosis.png');
  background-size: cover;
  background-repeat: repeat;
  color: white;
}
    body[data-theme='light'] {
  background-color: #f1f1f1;
  background-image: url('https://www.transparenttextures.com/patterns/paper-fibers.png');
  background-size: cover;
  background-repeat: repeat;
  color: #222;
}
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      transition: background-color 0.5s ease, color 0.5s ease;
    }
    .chat-container {
      width: 100%;
      max-width: 480px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      height: 100vh;
      background-color: inherit;
      border-left: 1px solid #ccc;
      border-right: 1px solid #ccc;
    }
    .chat-header {
      background-color: #00796b;
      color: white;
      padding: 15px;
      font-size: 18px;
      font-weight: bold;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid #004d40;
    }
    .chat-header .title {
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .chat-header .title::after {
      content: '🩺';
      margin-left: 8px;
    }
    .toggle-theme {
      background: none;
      border: none;
      cursor: pointer;
      font-size: 20px;
      color: white;
    }
    .chat-body {
      flex: 1;
      padding: 15px;
      overflow-y: auto;
      display: flex;
      flex-direction: column;
    }
    .message {
      max-width: 80%;
      padding: 10px;
      margin: 5px 0;
      border-radius: 8px;
      font-size: 14px;
      animation: fadeIn 0.3s ease;
    }
    .user {
      align-self: flex-end;
      background-color: #4db6ac;
      color: #000;
    }
    .bot {
      align-self: flex-start;
      background-color: #424242;
      color: #fff;
    }
    .chat-footer {
      display: flex;
      padding: 10px;
      background-color: #333;
      border-top: 1px solid #555;
    }
    .chat-footer input {
      flex: 1;
      padding: 10px;
      font-size: 14px;
      border: 1px solid #555;
      border-radius: 20px;
      background-color: #222;
      color: #fff;
      outline: none;
    }
    .chat-footer button {
      margin-left: 10px;
      padding: 10px 15px;
      background-color: #00796b;
      color: white;
      border: none;
      border-radius: 20px;
      cursor: pointer;
    }
    .disclaimer {
      text-align: center;
      font-size: 12px;
      color: #aaa;
      margin-top: 10px;
    }
    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body data-theme="dark">
  <div class="chat-container">
    <div class="chat-header">
      <div class="title">
        <img src="https://img.icons8.com/ios-filled/50/ffffff/doctor-male.png" width="24" alt="icon">
        Dr.IA - Assistente Virtual de Saúde
      </div>
      <button class="toggle-theme" onclick="alternarTema()">🌗</button>
    </div>
    <div class="chat-body" id="chat-body"></div>
    <div class="chat-footer">
      <input type="text" id="user-input" placeholder="Digite sua pergunta..." />
      <button onclick="enviarMensagem()">Enviar</button>
    </div>
  </div>
  <div class="disclaimer">Este chat não substitui um médico.</div>

  <script>
    function alternarTema() {
      const temaAtual = document.body.getAttribute('data-theme');
      document.body.setAttribute('data-theme', temaAtual === 'dark' ? 'light' : 'dark');
    }

    const respostas = {
      "ansiedade": "Ansiedade pode causar insônia, taquicardia e inquietação. Naturais: meditação, camomila, valeriana. Farmacêuticos: Fluoxetina, Diazepam (com prescrição médica).",
      "depressao": "Depressão envolve tristeza persistente e desânimo. Naturais: atividades físicas, exposição solar, psicoterapia. Farmacêuticos: Sertralina, Bupropiona (com acompanhamento médico).",
      "gripe": "Gripe é causada por vírus. Sintomas: febre, dores no corpo e coriza. Naturais: repouso, chá de gengibre e limão. Medicamentos: antitérmicos e antigripais como Benegrip.",
      "covid-19": "COVID-19 apresenta febre, tosse e cansaço. Isolamento e teste são recomendados. Naturais: hidratação, repouso. Medicamentos: analgésicos e antitérmicos, sob orientação médica.",
      "dor de cabeca": "Pode ser causada por estresse ou desidratação. Naturais: compressa fria, camomila. Medicamentos: Dipirona, Paracetamol.",
      "gastrite": "Inflamação no estômago, causa dor e queimação. Naturais: batata crua, chá de espinheira-santa. Medicamentos: Omeprazol, Ranitidina.",
      "refluxo": "Ácido retorna ao esôfago. Evite café e frituras. Naturais: chá de gengibre, alimentação leve. Medicamentos: Pantoprazol, Domperidona.",
      "hipertensao": "Pressão alta. Evite sal e estresse. Naturais: suco de beterraba, caminhada. Medicamentos: Losartana, Enalapril (prescritos).",
      "diabetes": "Excesso de açúcar no sangue. Controle com dieta. Naturais: canela, exercício. Medicamentos: Metformina, Insulina.",
      "herpes genital": "Vírus que causa feridas. Naturais: própolis, lisina. Medicamentos: Aciclovir, Valaciclovir.",
      "acne": "Cravos e espinhas. Naturais: argila verde, chá-verde. Medicamentos: Peróxido de benzoíla, Isotretinoína (prescrição).",
      "verminose": "Causa dores abdominais. Naturais: alho, sementes de abóbora. Medicamentos: Albendazol, Mebendazol."
    };

    const sugestoes = [
      "Estou com dor de cabeça",
      "Tenho sintomas de covid-19",
      "Estou com ansiedade",
      "O que fazer com acne?",
      "Tenho hipertensão"
    ];

    window.onload = () => {
      const sugestoesDiv = document.createElement("div");
      sugestoesDiv.style.display = "flex";
      sugestoesDiv.style.flexWrap = "wrap";
      sugestoesDiv.style.gap = "10px";
      sugestoesDiv.style.padding = "10px";
      sugestoesDiv.style.backgroundColor = "#1e1e1e";
      sugestoesDiv.style.borderTop = "1px solid #444";
      sugestoesDiv.style.justifyContent = "center";

      sugestoes.forEach(texto => {
        const btn = document.createElement("button");
        btn.innerText = texto;
        btn.style.backgroundColor = "#2196f3";
        btn.style.color = "white";
        btn.style.border = "none";
        btn.style.padding = "10px 15px";
        btn.style.borderRadius = "30px";
        btn.style.fontWeight = "bold";
        btn.style.boxShadow = "0 2px 6px rgba(0, 0, 0, 0.2)";
        btn.style.transition = "transform 0.2s ease";
        btn.onmouseover = () => btn.style.transform = "scale(1.05)";
        btn.onmouseout = () => btn.style.transform = "scale(1)";
        btn.style.cursor = "pointer";
        btn.onclick = () => {
          document.getElementById("user-input").value = texto;
          enviarMensagem();
        };
        sugestoesDiv.appendChild(btn);
      });

      document.body.insertBefore(sugestoesDiv, document.querySelector(".disclaimer"));

      adicionarMensagem("Olá! Sou o Dr.IA 🤖. Como posso te ajudar hoje?", "bot");
    };

    function enviarMensagem() {
      const input = document.getElementById("user-input");
      const texto = input.value.trim();
      if (texto === "") return;

      adicionarMensagem(texto, "user");

      setTimeout(() => {
        const resposta = buscarResposta(texto);
        adicionarMensagem(resposta, "bot");
      }, 500);

      input.value = "";
    }

    function adicionarMensagem(texto, tipo) {
      const chatBody = document.getElementById("chat-body");
      const msg = document.createElement("div");
      const time = new Date().toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});

      msg.className = `message ${tipo}`;
      msg.innerHTML = `
        <div style="display: flex; align-items: center; gap: 8px;">
          <img src="${tipo === 'bot' ? 'https://img.icons8.com/ios-filled/24/doctor-male.png' : 'https://img.icons8.com/ios-filled/24/user.png'}"/>
          <span>${texto}</span>
        </div>
        <div style="font-size: 10px; color: gray; text-align: right; margin-top: 2px">${time}</div>
      `;
      msg.style.animation = "fadeIn 0.3s ease";
      chatBody.appendChild(msg);
      chatBody.scrollTop = chatBody.scrollHeight;
    }

    function buscarResposta(pergunta) {
      pergunta = pergunta.toLowerCase().normalize('NFD').replace(/[̀-ͯ]/g, '');

      for (let chave in respostas) {
        const chaveNormalizada = chave.toLowerCase().normalize('NFD').replace(/[̀-ͯ]/g, '');
        if (pergunta.includes(chaveNormalizada)) {
          return respostas[chave];
        }
      }
      return "Desculpe, ainda não sei responder isso.";
    }
  </script>
</body>
</html>
